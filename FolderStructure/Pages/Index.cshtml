@page "{id:int?}"
@model IndexModel

<h1>Directory Structure</h1>

@functions {
    async Task RenderFolders(int parentId)
    {
        var folders = Model.Folders.Where(f => f.ParentId == parentId).ToList();

        if (folders.Any())
        {
            <ul>
                    @foreach (var childFolder in Model.ChildFolders)
                    {
                    <li>
                        <a href="/Index?id=@childFolder.Id">@childFolder.Name</a>
                    </li>
                }
            </ul>
        }
    }
}

@if (Model.Folder != null)
{
    <h1>@Model.Folder.Name</h1>
    await RenderFolders(Model.Folder.Id);
}
else
{
    <p> No folder found. </p>
}
